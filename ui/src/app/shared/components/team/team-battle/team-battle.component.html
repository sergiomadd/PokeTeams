<div class="flex-col align-i-c gap-xl">
  <ng-container *ngIf="team && team.pokemons">
    <div class="flex justify-c-c gap-m">
      <ng-container *ngFor="let pokemon of team.pokemons; index as i">
        <div class="relative pointer no-select" (click)="selectPokemon(i)">
          <div class="selector relative flex justify-c-c align-i-c bor-rad-20 bor-1-3 bg-1"
          [ngClass]="{'teratype-background': teraTypeEnabled[i], selected: pokemonIndex1 == i || pokemonIndex2 == i, 'darken-5': (pokemon | getDefenseEffectivenessPipe:(teraTypeEnabled[i] ? true : false)) | calcMoveEffectivenessPipe:(which === 'A' ? moveB : moveA)}"
          >
            <ng-container *ngIf="pokemon?.dexNumber && pokemon?.dexNumber !== -1; else index">
              <img class="icon-l" src="{{pokemon | getPokemonSpritePathPipe}}" alt="">
            </ng-container>
            <ng-template #index>{{i + 1}}</ng-template>
          </div>
          <ng-container *ngIf="pokemon?.dexNumber && pokemon?.dexNumber !== -1 && ((pokemon | getDefenseEffectivenessPipe:(teraTypeEnabled[i] ? true : false)) | calcMoveEffectivenessPipe:(which === 'A' ? moveB : moveA))">
            <div class="compare-effectiveness" 
            [ngStyle]="{'font-size': ((pokemon | getDefenseEffectivenessPipe:(teraTypeEnabled[i] ? true : false)) | calcMoveEffectivenessPipe:(which === 'A' ? moveB : moveA)) === 0.25 ? '1em' :'1.2em'}"
            >
              x{{ (pokemon | getDefenseEffectivenessPipe:(teraTypeEnabled[i] ? true : false)) | calcMoveEffectivenessPipe:(which === 'A' ? moveB : moveA)}}
            </div>
          </ng-container>
        </div>
      </ng-container>
    </div>
  </ng-container>
  <div class="flex justify-c-c align-i-s gap-m" [ngClass]="{'flex-col': window.isBigMobileOrLess()}">
    <ng-container *ngIf="team?.pokemons && team?.pokemons!.length > 0 && pokemonIndex1 > -1">
      <ng-container *ngIf="window.isBigMobileOrLess()">
        <div class="flex justify-c-e w-100">
          <div class="mar-y-s flex gap-m">
            <ng-container 
            [ngTemplateOutlet]="rightSideButtons"
            [ngTemplateOutletContext]="{side: 'bottom'}"
            ></ng-container>
          </div>
        </div>
      </ng-container>
    </ng-container>
    <div class="flex flex-col gap-xl">
      <ng-container *ngFor="let pokemon of team?.pokemons; index as i">
        <ng-container *ngIf="pokemon && i === pokemonIndex1 || i === pokemonIndex2">
          <app-pokemon-card 
          [pokemon]="pokemon" 
          [teamOptions]="team?.options"
          [compareTeam]="which"
          ></app-pokemon-card>
        </ng-container>
      </ng-container>

    </div>
    <ng-container *ngIf="team?.pokemons && team?.pokemons!.length > 0 && pokemonIndex1 > -1">
      <ng-container *ngIf="!window.isBigMobileOrLess()">
        <div class="mar-y-s flex-col gap-m">
          <ng-container 
          [ngTemplateOutlet]="rightSideButtons"
          [ngTemplateOutletContext]="{side: window.isTabletLandscapeOrLess() ? 'left' : 'right'}"
          ></ng-container>
        </div>
      </ng-container>
    </ng-container>
  </div>
</div>
<ng-template #rightSideButtons let-side="side">
  <div 
  class="detail tooltip-wrapper"
  (click)="clickOptions(0)"
  [ngClass]="{active: showAllStats}"
  >
    <app-tooltip
    [text]="'team.team.show_all_stats-tooltip' | translate"
    [side]="side"
    ></app-tooltip>   
    <svg class="icon-s" version="1.0" xmlns="http://www.w3.org/2000/svg" width="512.000000pt" height="512.000000pt" viewBox="0 0 512.000000 512.000000" preserveAspectRatio="xMidYMid meet"> <g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)" fill="var(--text-color)" stroke="none"> <path d="M755 4031 c-72 -32 -115 -104 -115 -191 0 -87 43 -159 115 -191 38 -18 114 -19 1805 -19 1691 0 1767 1 1805 19 154 69 154 313 0 382 -38 18 -114 19 -1805 19 -1691 0 -1767 -1 -1805 -19z"/> <path d="M755 2751 c-154 -69 -154 -313 0 -382 38 -18 95 -19 1165 -19 1070 0 1127 1 1165 19 154 69 154 313 0 382 -38 18 -95 19 -1165 19 -1070 0 -1127 -1 -1165 -19z"/> <path d="M755 1471 c-72 -32 -115 -104 -115 -191 0 -87 43 -159 115 -191 38 -18 108 -19 1593 -19 1507 0 1554 1 1590 19 75 39 112 101 112 191 0 66 -16 107 -59 153 -56 61 47 57 -1645 57 -1483 0 -1553 -1 -1591 -19z"/> </g> </svg> 
  </div>
  <div class="tooltip-wrapper">
    <div 
    class="detail" 
    (click)="clickOptions(1)"
    [ngClass]="
    {
      active: hasAnyNotes && showAllNotes,
      disabled: !hasAnyNotes
    }"
    >
      <svg class="icon-s" version="1.0" xmlns="http://www.w3.org/2000/svg" width="512.000000pt" height="512.000000pt" viewBox="0 0 512.000000 512.000000" preserveAspectRatio="xMidYMid meet"> <g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)" fill="var(--text-color)" stroke="none"> <path d="M4253 5080 c-78 -20 -114 -37 -183 -83 -44 -29 -2323 -2296 -2361 -2349 -21 -29 -329 -1122 -329 -1168 0 -56 65 -120 122 -120 44 0 1138 309 1166 329 15 11 543 536 1174 1168 837 838 1157 1165 1187 1212 74 116 105 270 82 407 -7 39 -30 105 -53 154 -36 76 -55 99 -182 226 -127 127 -150 145 -226 182 -135 65 -260 78 -397 42z m290 -272 c55 -27 258 -231 288 -288 20 -38 24 -60 24 -140 0 -121 -18 -160 -132 -279 l-82 -86 -303 303 -303 303 88 84 c49 46 108 93 132 105 87 42 203 41 288 -2z m-383 -673 l295 -295 -933 -932 -932 -933 -295 295 c-162 162 -295 299 -295 305 0 13 1842 1855 1855 1855 6 0 143 -133 305 -295z m-1822 -2284 c-37 -12 -643 -179 -645 -178 -1 1 30 115 68 252 38 138 79 285 91 329 l21 78 238 -238 c132 -132 233 -241 227 -243z"/> <path d="M480 4584 c-209 -56 -370 -206 -444 -414 l-31 -85 0 -1775 c0 -1693 1 -1778 18 -1834 37 -120 77 -187 167 -277 63 -63 104 -95 157 -121 146 -73 3 -69 2113 -66 l1895 3 67 26 c197 77 336 218 401 409 22 64 22 74 25 710 3 579 2 648 -13 676 -21 40 -64 64 -114 64 -33 0 -49 -7 -79 -34 l-37 -34 -5 -634 c-5 -631 -5 -633 -28 -690 -41 -102 -118 -179 -220 -220 l-57 -23 -1834 -3 c-1211 -1 -1853 1 -1890 8 -120 22 -227 104 -277 213 l-29 62 0 1760 0 1760 29 63 c37 80 122 161 203 194 l58 23 630 5 c704 6 664 1 700 77 23 48 13 95 -31 138 l-35 35 -642 -1 c-533 0 -651 -3 -697 -15z"/> </g> </svg>
    </div>
    <app-tooltip
    [text]="hasAnyNotes ? ('team.team.show_all_notes-tooltip' | translate) : 'pokemon.no_notes' | translate"
    [side]="side"
    ></app-tooltip> 
  </div>
  <div 
  class="detail tooltip-wrapper" 
  (click)="clickOptions(2)"
  >
  <app-tooltip
  [text]="'team.team.close_all_tooltips-tooltip' | translate"
  [side]="side"
  ></app-tooltip>
    <svg class="icon-s" fill="var(--text-color)" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="m20 2h-16c-1.1 0-2 .9-2 2v12c0 1.11.9 2 2 2h4l4 4 4-4h4c1.11 0 2-.89 2-2v-12c0-1.1-.89-2-2-2m0 14h-4.83l-3.17 3.17-3.17-3.17h-4.83v-12h16zm-11.54-3.88 2.13-2.12-2.13-2.12 1.42-1.41 2.12 2.12 2.12-2.12 1.42 1.41-2.13 2.12 2.13 2.12-1.42 1.42-2.12-2.13-2.12 2.13z"/></svg>
  </div>
</ng-template>