<ng-container *ngIf="data$ | async as data">
  <div class="wrapper">
    <ng-container *ngIf="login">
      <div class="nav">
        <div class="tab tab-left tab-selected" (click)="showLogInForm()">
          Log In
        </div>
        <div class="tab tab-right" (click)="showSignUpForm()">
          Sign Up
        </div>
      </div>
      <form
      class="form" 
      [formGroup]="logInForm" 
      (ngSubmit)="logIn()"
      >
        <div class="inputs">
          <div class="clear inside-shadow" (click)="clearLogInForm()">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M566.6 54.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192-34.7-34.7c-4.2-4.2-10-6.6-16-6.6c-12.5 0-22.6 10.1-22.6 22.6v29.1L364.3 320h29.1c12.5 0 22.6-10.1 22.6-22.6c0-6-2.4-11.8-6.6-16l-34.7-34.7 192-192zM341.1 353.4L222.6 234.9c-42.7-3.7-85.2 11.7-115.8 42.3l-8 8C76.5 307.5 64 337.7 64 369.2c0 6.8 7.1 11.2 13.2 8.2l51.1-25.5c5-2.5 9.5 4.1 5.4 7.9L7.3 473.4C2.7 477.6 0 483.6 0 489.9C0 502.1 9.9 512 22.1 512l173.3 0c38.8 0 75.9-15.4 103.4-42.8c30.6-30.6 45.9-73.1 42.3-115.8z"/></svg>
          </div>
          <div class="item">
            <label for="">Username</label>
            <input type="text" 
            formControlName="userNameOrEmail"
            [ngClass]="{controlInvalid: isInvalid('userNameOrEmail', 'login')}"
            >
            <span *ngIf="isInvalid('userNameOrEmail', 'login')" class="formFeedbackError">{{getError('userNameOrEmail', 'login')}}</span>
          </div>
          <div class="item">
            <label for="">Password</label>
            <input type="password" 
            formControlName="password"
            [ngClass]="{controlInvalid: isInvalid('password', 'login')}"
            >
            <span *ngIf="isInvalid('password', 'login')" class="formFeedbackError">{{getError('password', 'login')}}</span>
          </div>
        </div>
        <div class="row-end">
          <div class="progress">
            <ng-container *ngIf="data.isSubmitting">
              <div class="loader"></div>
            </ng-container>
            <ng-container *ngIf="logInFormSubmitted && data.backendErrors">
              <ng-container *ngFor="let error of data.backendErrors">
                <span class="formFeedbackError">{{error}}</span>
              </ng-container>
            </ng-container>
          </div>
          <button 
          type="submit" 
          class="entry"
          [disabled]="data.isSubmitting"
          >Log In</button>
        </div>
      </form>
    </ng-container>
    <ng-container *ngIf="signup">
      <div class="nav">
        <div class="tab tab-left" (click)="showLogInForm()">
          Log In
        </div>
        <div class="tab tab-right tab-selected" (click)="showSignUpForm()">
          Sign Up
        </div>
      </div>
      <form class="form"
      [formGroup]="signUpForm" 
      (ngSubmit)="signUp()"
      >
        <div class="inputs">
          <div class="clear inside-shadow" (click)="clearSignUpForm()">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M566.6 54.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192-34.7-34.7c-4.2-4.2-10-6.6-16-6.6c-12.5 0-22.6 10.1-22.6 22.6v29.1L364.3 320h29.1c12.5 0 22.6-10.1 22.6-22.6c0-6-2.4-11.8-6.6-16l-34.7-34.7 192-192zM341.1 353.4L222.6 234.9c-42.7-3.7-85.2 11.7-115.8 42.3l-8 8C76.5 307.5 64 337.7 64 369.2c0 6.8 7.1 11.2 13.2 8.2l51.1-25.5c5-2.5 9.5 4.1 5.4 7.9L7.3 473.4C2.7 477.6 0 483.6 0 489.9C0 502.1 9.9 512 22.1 512l173.3 0c38.8 0 75.9-15.4 103.4-42.8c30.6-30.6 45.9-73.1 42.3-115.8z"/></svg>
          </div>
          <div class="item">
            <label>Username*</label>
            <input type="text" 
            formControlName="username"
            [ngClass]="{controlInvalid: isInvalid('username', 'signup')}"
            >
            <span *ngIf="userNameAvailable" class="formFeedbackSuccess">This username is available</span>
            <span *ngIf="isInvalid('username', 'signup')" class="formFeedbackError">{{getError('username', 'signup')}}</span>
          </div>
          <div class="item">
            <label>Email*</label>
            <input type="text" 
            formControlName="email"
            [ngClass]="{controlInvalid: isInvalid('email', 'signup')}"
            >
            <span *ngIf="emailAvailable" class="formFeedbackSuccess">This email is available</span>
            <span *ngIf="isInvalid('email', 'signup')" class="formFeedbackError">{{getError('email', 'signup')}}</span>
          </div>
          <div class="item">
            <label>Password*</label>
            <input type="password" 
            formControlName="password"
            [ngClass]="{controlInvalid: isInvalid('password', 'signup')}"
            >
            <span *ngIf="isInvalid('password', 'signup')" class="formFeedbackError">{{getError('password', 'signup')}}</span>
          </div>
          <div class="item">
            <label>Confirm Password*</label>
            <input type="password" 
            formControlName="confirmPassword"
            [ngClass]="{controlInvalid: isInvalid('confirmPassword', 'signup')}"
            >
            <span *ngIf="isInvalid('confirmPassword', 'signup')" class="formFeedbackError">{{getError('confirmPassword', 'signup')}}</span>
          </div>
        </div>
        <div class="row-end">
          <div class="progress">
            <ng-container *ngIf="data.isSubmitting">
              <div class="loader"></div>
            </ng-container>
            <ng-container *ngIf="signUpFormSubmitted && data.backendErrors">
              <ng-container *ngFor="let error of data.backendErrors">
                <span class="formFeedbackError">{{error}}</span>
              </ng-container>
            </ng-container>
          </div>
          <button 
          type="submit" 
          class="entry"
          [disabled]="data.isSubmitting"
          >Sign Up</button>
        </div>
      </form>
    </ng-container>
  </div>  
</ng-container>
